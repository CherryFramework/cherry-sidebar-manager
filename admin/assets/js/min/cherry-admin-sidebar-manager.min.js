!function(){"use strict";var e={submitButton:null,spinner:null,errorMessage:null,form:null,btnNewSidebar:null,btnRemoveSidebar:null,customSidebarHolder1:null,customSidebarHolder2:null,ajaxRequest:null,newSidebarData:{action:"add_new_custom_sidebar",security:cherryFramework.ajax_nonce_new_sidebar,formdata:{}},removeSidebarData:{action:"remove_custom_sidebar",id:"",security:cherryFramework.ajax_nonce_remove_sidebar},init:function(){var e=this;e.form=jQuery("#cherry-sidebar-manager-form"),e.submitButton=jQuery("#sidebar-manager-submit",e.form),e.spinner=jQuery(".spinner-wordpress-type-1",e.form),e.errorMessage=jQuery("#cherry-error-message",e.form),e.customSidebarHolder1=jQuery("#cherry-sidebar-manager-holder .sidebars-column-1"),e.customSidebarHolder2=jQuery("#cherry-sidebar-manager-holder .sidebars-column-2"),e.btnNewSidebar=jQuery(".btn-create-sidebar.thickbox"),e.btnRemoveSidebar=jQuery(".cherry-delete-sidebar-manager"),e.submitButton.on("click",e.submitByttonHandler),e.btnNewSidebar.on("click",e.openThickBox),e.btnRemoveSidebar.on("click",e.removeCustomSidebar),jQuery.ajaxSetup({type:"GET",url:ajaxurl,cache:!1})},openThickBox:function(){jQuery('input[type="text"]',e.form).removeClass("error-invalid")},submitByttonHandler:function(){{var r=e.form.serializeArray();jQuery(".cherry-sidebar-manager")}for(var a in r){var i=r[a],t=jQuery('input[name="'+i.name+'"]',e.form);!i.value&&t.hasClass("required")?t.addClass("error-invalid"):t.removeClass("error-invalid")}return jQuery(".error-invalid",e.form)[0]||(e.newSidebarData.formdata=r,e.aJaxRequestNewSitebar()),!1},aJaxRequestNewSitebar:function(){e.ajaxRequest=jQuery.ajax({data:e.newSidebarData,beforeSend:function(){e.submitButton.attr({disabled:!0}),e.spinner.css({display:"block"}),e.ajaxRequest&&e.ajaxRequest.abort()},success:function(r){var a=jQuery(".widgets-holder-wrap",e.customSidebarHolder1).length,i=jQuery(".widgets-holder-wrap",e.customSidebarHolder2).length,t=jQuery(r);i>=a?e.customSidebarHolder1.append(t):e.customSidebarHolder2.append(t),jQuery(".cherry-delete-sidebar-manager",t).on("click",e.removeCustomSidebar),jQuery('input[type="text"]',e.form).val(""),jQuery(".tb-close-icon").trigger("click"),jQuery("#widgets-right .sidebar-name").unbind("click"),jQuery("#widgets-left .sidebar-name").unbind("click"),jQuery(document.body).unbind("click.widgets-toggle"),jQuery(".widgets-chooser").off("click.widgets-chooser").off("keyup.widgets-chooser"),jQuery("#available-widgets .widget .widget-title").off("click.widgets-chooser"),jQuery(".widgets-chooser-sidebars").empty(),window.wpWidgets&&window.wpWidgets.init()},complete:function(){e.spinner.delay(200).css({display:"none"}),e.submitButton.attr({disabled:!1})},error:function(){e.errorMessage.css({display:"block"}).delay(3e3).fadeOut(800,0)}})},removeCustomSidebar:function(){var r=jQuery(this).parents(".cherry-widgets-holder-wrap");e.removeSidebarData.id=jQuery(".widgets-sortables",r).attr("id"),e.aJaxRequestremoveSitebar(r)},aJaxRequestremoveSitebar:function(r){e.ajaxRequest=jQuery.ajax({data:e.removeSidebarData,beforeSend:function(){jQuery(".cherry-spinner-wordpress",r).css({display:"block"})},success:function(){r.remove()}})}};jQuery(document).ready(function(){function r(){var e=jQuery(this);jQuery("~ .sidebars-holder",e).toggleClass("closed"),jQuery(".sidebar-name-arrow",e).toggleClass("closed-arrow")}e.init(),jQuery("body:not(.widgets_access) .sidebar-manager-name").on("click",r)})}(jQuery);